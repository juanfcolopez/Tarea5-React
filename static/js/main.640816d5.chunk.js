(this.webpackJsonptarea5=this.webpackJsonptarea5||[]).push([[0],{226:function(e,t,a){e.exports=a(513)},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},247:function(e,t){},249:function(e,t){},271:function(e,t){},273:function(e,t){},297:function(e,t){},299:function(e,t){},327:function(e,t){},329:function(e,t){},330:function(e,t){},336:function(e,t){},338:function(e,t){},356:function(e,t){},359:function(e,t){},374:function(e,t){},377:function(e,t){},397:function(e,t){},511:function(e,t,a){},513:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(224),o=a.n(i),l=(a(231),a(31)),s=a(32),c=a(34),u=a(33),d=(a(232),a(516)),m=a(514),h=a(515),S=a(98),p=(a(233),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.asks,t=this.props.bids,a=0,n=0;return e=e.map((function(e,t){return a+=parseFloat(e.size),{price:e.price,size:a}})),t=t.map((function(e,t){return n+=parseFloat(e.size),{price:e.price,size:n}})),r.a.createElement(m.a,null,r.a.createElement(h.a,{xs:"12",md:"12",lg:"12"},r.a.createElement("div",{className:"StockOrderBookTitle"},r.a.createElement("h3",null,"Orderbook")),r.a.createElement("div",{className:"StockOrderBook"},r.a.createElement("table",{className:"StockOrderBookBids"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Price"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t,className:"askRow"},r.a.createElement("td",null,Math.round(100*e.size)/100),r.a.createElement("td",null,Math.round(100*e.price)/100,r.a.createElement("div",{className:"bg",style:{width:e.size/n*80+"%"}})))})))),r.a.createElement("table",{className:"StockOrderBookAsks"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Size"))),r.a.createElement("tbody",null,e.map((function(e,t){return r.a.createElement("tr",{key:t,className:"bidRow"},r.a.createElement("td",null,Math.round(100*e.price)/100,r.a.createElement("div",{className:"bg",style:{width:e.size/a*80+"%"}})),r.a.createElement("td",null,Math.round(100*e.size)/100))})))))))}}]),a}(r.a.Component)),k=(a(236),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).transactions=[],n}return Object(s.a)(a,[{key:"timeConverter",value:function(e){var t=new Date(e),a=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return this.strPad(a)+":"+this.strPad(n)+":"+this.strPad(r)}},{key:"strPad",value:function(e){return String("00"+e).slice(-2)}},{key:"render",value:function(){var e=this;return this.transactions=this.props.trades,r.a.createElement(m.a,null,r.a.createElement(h.a,{xs:"12",md:"12",lg:"6"},r.a.createElement("div",{className:"StockData"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Volume 24hs:"),r.a.createElement("td",null,this.props.info.volume)),r.a.createElement("tr",null,r.a.createElement("th",null,"High 24hs:"),r.a.createElement("td",null,this.props.info.high)),r.a.createElement("tr",null,r.a.createElement("th",null,"Low 24hs:"),r.a.createElement("td",null,this.props.info.low)),r.a.createElement("tr",null,r.a.createElement("th",null,"Last Price:"),r.a.createElement("td",null,this.props.info.last)),r.a.createElement("tr",null,r.a.createElement("th",null,"Variation 24hs:"),r.a.createElement("td",null,this.props.info.variation,"%")))))),r.a.createElement(h.a,{xs:"12",md:"12",lg:"6"},r.a.createElement("div",{className:"StockTradesData"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Price"))),r.a.createElement("tbody",null,this.transactions.map((function(t,a){return"buy"===t.side?r.a.createElement("tr",{key:a,className:"buyOrder"},r.a.createElement("td",null,e.timeConverter(t.time)),r.a.createElement("td",null,t.amount),r.a.createElement("td",null,parseInt(t.price))):r.a.createElement("tr",{key:a,className:"sellOrder"},r.a.createElement("td",null,e.timeConverter(t.time)),r.a.createElement("td",null,t.amount),r.a.createElement("td",null,parseInt(t.price)))})))))))}}]),a}(r.a.Component)),b=(a(237),a(225)),E=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).chart=null,n.lineSeries=null,n.chartTooltip=r.a.createRef(),n}return Object(s.a)(a,[{key:"shouldComponentUpdate",value:function(e){return this.lineSeries.setData(e.data),!1}},{key:"componentDidMount",value:function(){var e=this;this.chart=Object(b.a)(document.getElementById("TradeChart"),{width:600,height:350,fixLeftEdge:!0,crosshair:{labelVisible:!1,visible:!1},localization:{locale:"es-CL",dateFormat:"dd/mm/yyyy",timeFormatter:function(e){var t=new Date(1e3*e),a=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return String("00"+a).slice(-2)+":"+String("00"+n).slice(-2)+":"+String("00"+r).slice(-2)}},priceScale:{scaleMargins:{top:.3,bottom:.25},borderVisible:!1},layout:{backgroundColor:"#131722",textColor:"#d1d4dc"},grid:{vertLines:{color:"rgba(42, 46, 57, 0)"},horzLines:{color:"rgba(42, 46, 57, 0.6)"}},timeScale:{timeVisible:!0,visible:!1}}),this.lineSeries=this.chart.addCandlestickSeries(),this.chart.timeScale().applyOptions({fixLeftEdge:!0,crosshair:{labelVisible:!1,visible:!1},timeScale:{timeVisible:!0,visible:!1}}),window.addEventListener("resize",(function(t){e.chart.resize(document.getElementById("TradeChart").clientWidth,350)})),this.chart.resize(document.getElementById("TradeChart").clientWidth,350);var t=document.getElementById("TradeChartTooltip");this.chart.subscribeCrosshairMove((function(a){if(!a.time||a.point.x<0||a.point.x>600||a.point.y<0||a.point.y>300)t.style.display="none";else{var n=e.datetimeConverter(1e3*a.time);t.style.display="block";var r=a.seriesPrices.get(e.lineSeries);t.innerHTML='<div style="font-size: 8px; margin: 4px 0px"> o: '+Math.round(r.open)+" - h: "+Math.round(r.high)+" - l: "+Math.round(r.low)+" - c: "+Math.round(r.close)+"</div><div>"+n+"</div>";var i=a.point.y,o=a.point.x+15;o>480&&(o=a.point.x-15-120);var l=i+15;l>200&&(l=i-100-15),t.style.left=o+"px",t.style.top=l+"px"}}))}},{key:"datetimeConverter",value:function(e){var t=new Date(e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getDate(),i=t.getHours(),o=t.getMinutes(),l=t.getSeconds();return r+" "+n+" "+a+" "+this.strPad(i)+":"+this.strPad(o)+":"+this.strPad(l)}},{key:"strPad",value:function(e){return String("00"+e).slice(-2)}},{key:"render",value:function(){return r.a.createElement("div",{id:"TradeChart"},r.a.createElement("div",{ref:this.chartTooltip,id:"TradeChartTooltip",className:"floating-tooltip-2"}))}}]),a}(r.a.Component),f=a(238),v=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={orderbookAsks:[],orderbookBids:[],info:{volume:0,high:0,low:0,lastPrice:0,variation:0,price:0,side:0,time:0,amount:""},trades:[],candles:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.startGettingData(this.props.market)}},{key:"startGettingData",value:function(e){var t=this;fetch("https://api.binance.com/api/v3/klines?symbol="+e.id+"&interval=1h").then((function(e){return e.json()})).then((function(a){var n=a.map((function(e,t){return{time:e[0],open:e[1],high:e[2],low:e[3],close:e[4]}}));t.setState({candles:n}),t.connectSocket(e)})).catch(console.log)}},{key:"changeStock",value:function(e){this.disconnectSockets(),this.startGettingData(e)}},{key:"disconnectSockets",value:function(){this.klineStream.close(),this.tradeStream.close(),this.infoStream.close()}},{key:"connectSocket",value:function(e){var t=this;this.klineStream=new WebSocket("wss://stream.binance.com:9443/ws/"+e.id.toLowerCase()+"@kline_1h"),this.tradeStream=new WebSocket("wss://stream.binance.com:9443/ws/"+e.id.toLowerCase()+"@aggTrade"),this.infoStream=new WebSocket("wss://stream.binance.com:9443/ws/"+e.id.toLowerCase()+"@ticker"),this.socket2=new f.binance,this.socket2.on("l2snapshot",(function(e){t.setState({orderbookAsks:e.asks,orderbookBids:e.bids})})),this.socket2.subscribeLevel2Snapshots(e),this.klineStream.onmessage=function(e){var a=JSON.parse(e.data),n={time:a.k.t,open:a.k.o,high:a.k.h,low:a.k.l,close:a.k.c};t.state.candles.length>0&&t.state.candles[t.state.candles.length-1].time===n.time?t.setState({candles:[].concat(Object(S.a)(t.state.candles.slice(0,-1)),[n])}):t.setState({candles:[].concat(Object(S.a)(t.state.candles),[n])})},this.tradeStream.onmessage=function(e){var a=JSON.parse(e.data),n={time:a.E,amount:a.q,price:a.p,side:a.m?"buy":"sell"};t.setState({trades:[n].concat(Object(S.a)(t.state.trades.slice(0,20)))})},this.infoStream.onmessage=function(e){var a=JSON.parse(e.data);t.setState({info:{volume:Math.round(100*a.v)/100,variation:Math.round((a.c-a.o)/a.o*1e4)/100,high:Math.round(100*a.h)/100,low:Math.round(100*a.l)/100,last:Math.round(100*a.c)/100}})}}},{key:"shouldComponentUpdate",value:function(e,t){return e.market.id!==this.props.market.id?(this.changeStock(e.market),!0):!!t}},{key:"render",value:function(){return r.a.createElement("div",{className:"Stock"},r.a.createElement(E,{data:this.state.candles}),r.a.createElement(k,{info:this.state.info,trades:this.state.trades}),r.a.createElement(p,{asks:this.state.orderbookAsks,bids:this.state.orderbookBids}))}}]),a}(r.a.Component),g=(a(511),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"StockList"},r.a.createElement("ul",null,this.props.markets.map((function(t,a){return r.a.createElement("li",{key:a,onClick:e.props.clickAction,stockId:t.id},t.id)}))))}}]),a}(r.a.Component)),T={BTCUSDT:{id:"BTCUSDT",base:"BTC",quote:"USDT"},ETHUSDT:{id:"ETHUSDT",base:"ETH",quote:"USDT"},BNBUSDT:{id:"BNBUSDT",base:"BNB",quote:"USDT"},ADAUSDT:{id:"ADAUSDT",base:"ADA",quote:"USDT"},BUSDUSDT:{id:"BUSDUSDT",base:"BUSD",quote:"USDT"},XRPUSDT:{id:"XRPUSDT",base:"XRP",quote:"USDT"},BCHUSDT:{id:"BCHUSDT",base:"BCH",quote:"USDT"},ETCUSDT:{id:"ETCUSDT",base:"ETC",quote:"USDT"},EOSUSDT:{id:"EOSUSDT",base:"EOS",quote:"USDT"},LTCUSDT:{id:"LTCUSDT",base:"XRP",quote:"USDT"},DASHUSDT:{id:"DASHUSDT",base:"DASH",quote:"USDT"},XMRUSDT:{id:"XMRUSDT",base:"XMR",quote:"USDT"}},y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={stockShowing:""},n}return Object(s.a)(a,[{key:"onStockClick",value:function(e){console.log(e.target.getAttribute("stockId"));var t=e.target.getAttribute("stockId");this.updateStock(t)}},{key:"updateStock",value:function(e){this.setState({stockShowing:e})}},{key:"render",value:function(){var e=Object.values(T);return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,null,r.a.createElement(m.a,null,r.a.createElement(h.a,{xs:"12",md:"12",lg:"3"},r.a.createElement(g,{markets:e,clickAction:this.onStockClick.bind(this)})),r.a.createElement(h.a,{xs:"12",md:"12",lg:"9"},this.state.stockShowing?r.a.createElement(v,{market:T[this.state.stockShowing]}):r.a.createElement("h4",{style:{width:"100%"}},"Select a stock...")))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(512);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[226,1,2]]]);
//# sourceMappingURL=main.640816d5.chunk.js.map