(this.webpackJsonptarea5=this.webpackJsonptarea5||[]).push([[0],{25:function(e,t,a){e.exports=a(42)},30:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),i=a.n(o),c=(a(30),a(3)),l=a(4),s=a(7),u=a(6),d=a(5),h=(a(36),a(45)),m=a(43),p=a(44),b=(a(37),function(e){return e.stockShowing}),k=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.asks.slice(0,15),t=this.props.bids.slice(0,15),a=0,n=0;return e=e.map((function(e,t){return a+=parseFloat(e.size),{price:e.price,size:a}})),t=t.map((function(e,t){return n+=parseFloat(e.size),{price:e.price,size:n}})),r.a.createElement(m.a,null,r.a.createElement(p.a,{xs:"12",md:"12",lg:"12"},r.a.createElement("div",{className:"StockOrderBookTitle"},r.a.createElement("h3",null,"Orderbook")),r.a.createElement("div",{className:"StockOrderBook"},r.a.createElement("table",{className:"StockOrderBookBids"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Price"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t,className:"askRow"},r.a.createElement("td",null,Math.round(100*e.size)/100),r.a.createElement("td",null,Math.round(100*e.price)/100,r.a.createElement("div",{className:"bg",style:{width:e.size/n*80+"%"}})))})))),r.a.createElement("table",{className:"StockOrderBookAsks"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Size"))),r.a.createElement("tbody",null,e.map((function(e,t){return r.a.createElement("tr",{key:t,className:"bidRow"},r.a.createElement("td",null,Math.round(100*e.price)/100,r.a.createElement("div",{className:"bg",style:{width:e.size/a*80+"%"}})),r.a.createElement("td",null,Math.round(100*e.size)/100))})))))))}}]),a}(r.a.Component),S=Object(d.b)((function(e){var t=function(e){return e.orderbook}(e);return{asks:t.asks,bids:t.bids}}),{})(k),v=(a(38),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),n=t.call(this,e),console.log(e),n.transactions=[],n}return Object(l.a)(a,[{key:"timeConverter",value:function(e){var t=new Date(e),a=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return this.strPad(a)+":"+this.strPad(n)+":"+this.strPad(r)}},{key:"strPad",value:function(e){return String("00"+e).slice(-2)}},{key:"render",value:function(){var e=this;return r.a.createElement(m.a,null,r.a.createElement(p.a,{xs:"12",md:"12",lg:"6"},r.a.createElement("div",{className:"StockData"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Volume 24hs:"),r.a.createElement("td",null,this.props.info.volume)),r.a.createElement("tr",null,r.a.createElement("th",null,"High 24hs:"),r.a.createElement("td",null,this.props.info.high)),r.a.createElement("tr",null,r.a.createElement("th",null,"Low 24hs:"),r.a.createElement("td",null,this.props.info.low)),r.a.createElement("tr",null,r.a.createElement("th",null,"Last Price:"),r.a.createElement("td",null,this.props.info.last)),r.a.createElement("tr",null,r.a.createElement("th",null,"Variation 24hs:"),r.a.createElement("td",null,this.props.info.variation,"%")))))),r.a.createElement(p.a,{xs:"12",md:"12",lg:"6"},r.a.createElement("div",{className:"StockTradesData"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Price"))),r.a.createElement("tbody",null,this.props.trades.map((function(t,a){return"buy"===t.side?r.a.createElement("tr",{key:a,className:"buyOrder"},r.a.createElement("td",null,e.timeConverter(t.time)),r.a.createElement("td",null,t.amount),r.a.createElement("td",null,Math.round(100*t.price)/100)):r.a.createElement("tr",{key:a,className:"sellOrder"},r.a.createElement("td",null,e.timeConverter(t.time)),r.a.createElement("td",null,t.amount),r.a.createElement("td",null,Math.round(100*t.price)/100))})))))))}}]),a}(r.a.Component)),f=Object(d.b)((function(e){return{info:function(e){return e.stockInfo}(e),trades:function(e){return e.trades}(e)}}),{})(v),E=(a(39),a(24)),g=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).chart=null,n.lineSeries=null,n.chartTooltip=r.a.createRef(),n}return Object(l.a)(a,[{key:"shouldComponentUpdate",value:function(e){return console.log(e.data),this.lineSeries.setData(e.data),this.chart.timeScale().applyOptions({fixLeftEdge:!0,crosshair:{labelVisible:!1,visible:!1},timeScale:{timeVisible:!0,visible:!1}}),!1}},{key:"componentDidMount",value:function(){var e=this;this.chart=Object(E.a)(document.getElementById("TradeChart"),{width:600,height:350,fixLeftEdge:!0,crosshair:{labelVisible:!1,visible:!1},localization:{locale:"es-CL",dateFormat:"dd/mm/yyyy",timeFormatter:function(e){var t=new Date(1e3*e),a=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return String("00"+a).slice(-2)+":"+String("00"+n).slice(-2)+":"+String("00"+r).slice(-2)}},priceScale:{scaleMargins:{top:.3,bottom:.25},borderVisible:!1},layout:{backgroundColor:"#131722",textColor:"#d1d4dc"},grid:{vertLines:{color:"rgba(42, 46, 57, 0)"},horzLines:{color:"rgba(42, 46, 57, 0.6)"}},timeScale:{timeVisible:!0,visible:!1}}),this.lineSeries=this.chart.addCandlestickSeries(),this.chart.timeScale().applyOptions({fixLeftEdge:!0,crosshair:{labelVisible:!1,visible:!1},timeScale:{timeVisible:!0,visible:!1}}),window.addEventListener("resize",(function(t){e.chart.resize(document.getElementById("TradeChart").clientWidth,350)})),this.chart.resize(document.getElementById("TradeChart").clientWidth,350);var t=document.getElementById("TradeChartTooltip");this.chart.subscribeCrosshairMove((function(a){if(!a.time||a.point.x<0||a.point.x>600||a.point.y<0||a.point.y>300)t.style.display="none";else{var n=e.datetimeConverter(1e3*a.time);t.style.display="block";var r=a.seriesPrices.get(e.lineSeries);t.innerHTML='<div style="font-size: 8px; margin: 4px 0px"> o: '+Math.round(r.open)+" - h: "+Math.round(r.high)+" - l: "+Math.round(r.low)+" - c: "+Math.round(r.close)+"</div><div>"+n+"</div>";var o=a.point.y,i=a.point.x+15;i>480&&(i=a.point.x-15-120);var c=o+15;c>200&&(c=o-100-15),t.style.left=i+"px",t.style.top=c+"px"}}))}},{key:"datetimeConverter",value:function(e){var t=new Date(e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getDate(),o=t.getHours(),i=t.getMinutes(),c=t.getSeconds();return r+" "+n+" "+a+" "+this.strPad(o)+":"+this.strPad(i)+":"+this.strPad(c)}},{key:"strPad",value:function(e){return String("00"+e).slice(-2)}},{key:"render",value:function(){return r.a.createElement("div",{id:"TradeChart"},r.a.createElement("div",{ref:this.chartTooltip,id:"TradeChartTooltip",className:"floating-tooltip-2"}))}}]),a}(r.a.Component),y=Object(d.b)((function(e){return{data:function(e){return e.candles}(e)}}),{})(g),O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={stockShowing:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({stockShowing:this.props.stockShowing.id}),this.start(this.props.stockShowing.id)}},{key:"shouldComponentUpdate",value:function(e){return this.state.stockShowing!=e.stockShowing.id&&this.changeStock(e.stockShowing.id),!1}},{key:"changeStock",value:function(e){this.setState({stockShowing:e}),this.restart(e)}},{key:"start",value:function(e){this.getCandles(e),this.getOrderBook(e),this.connectTradesWebsocket(e),this.connectTickerWebsocket(e),this.connectCandleWebsocket(e),this.connectOrderBookWebsocket(e)}},{key:"stop",value:function(){this.tradeStream&&this.tradeStream.close(),this.infoStream&&this.infoStream.close(),this.klineStream&&this.klineStream.close(),this.orderbookStream&&this.orderbookStream.close()}},{key:"restart",value:function(e){this.stop(),this.start(e)}},{key:"getCandles",value:function(e){var t=this;fetch("https://api.binance.com/api/v3/klines?symbol="+e+"&interval=1h").then((function(e){return e.json()})).then((function(e){var a=e.map((function(e,t){return{time:e[0],open:e[1],high:e[2],low:e[3],close:e[4]}}));t.props.setCandles(a)})).catch(console.log)}},{key:"getOrderBook",value:function(e){var t=this;fetch("https://www.binance.com/api/v3/depth?symbol="+e+"&limit=1000").then((function(e){return e.json()})).then((function(e){var a={lastUpdateId:e.lastUpdateId};a.asks=e.asks.map((function(e,t){return{price:e[0],size:e[1]}})),a.bids=e.bids.map((function(e,t){return{price:e[0],size:e[1]}})),t.props.setOrderBook(a)})).catch(console.log)}},{key:"connectTradesWebsocket",value:function(e){var t=this;this.tradeStream=new WebSocket("wss://stream.binance.com:9443/ws/"+e.toLowerCase()+"@aggTrade"),this.tradeStream.onmessage=function(e){var a=JSON.parse(e.data),n={time:a.E,amount:a.q,price:a.p,side:a.m?"buy":"sell"};t.props.addTrade(n)}}},{key:"connectTickerWebsocket",value:function(e){var t=this;this.infoStream=new WebSocket("wss://stream.binance.com:9443/ws/"+e.toLowerCase()+"@ticker"),this.infoStream.onmessage=function(e){var a=JSON.parse(e.data),n={volume:Math.round(100*a.v)/100,variation:Math.round((a.c-a.o)/a.o*1e4)/100,high:Math.round(100*a.h)/100,low:Math.round(100*a.l)/100,last:Math.round(100*a.c)/100};t.props.setStockInfo(n)}}},{key:"connectCandleWebsocket",value:function(e){var t=this;this.klineStream=new WebSocket("wss://stream.binance.com:9443/ws/"+e.toLowerCase()+"@kline_1h"),this.klineStream.onmessage=function(e){var a=JSON.parse(e.data),n={time:a.k.t,open:a.k.o,high:a.k.h,low:a.k.l,close:a.k.c};t.props.addCandle(n)}}},{key:"connectOrderBookWebsocket",value:function(e){var t=this;this.orderbookStream=new WebSocket("wss://stream.binance.com:9443/ws/"+e.toLowerCase()+"@depth"),this.orderbookStream.onmessage=function(e){var a=JSON.parse(e.data),n={u:a.u,U:a.U,asks:a.a,bids:a.b};t.props.updateOrderBook(n)}}},{key:"render",value:function(){return null}}]),a}(r.a.Component),T=Object(d.b)((function(e){return{stockShowing:b(e)}}),{setCandles:function(e){return{type:"SET_CANDLES",payload:{candles:e}}},addCandle:function(e){return{type:"ADD_CANDLE",payload:{candle:e}}},addTrade:function(e){return{type:"ADD_TRADE",payload:{trade:e}}},setStockInfo:function(e){return{type:"SET_STOCK_INFO",payload:{info:e}}},setOrderBook:function(e){return{type:"SET_ORDERBOOK",payload:{orderbook:e}}},updateOrderBook:function(e){return{type:"UPDATE_ORDERBOOK",payload:{orderbook:e}}}})(O),D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Stock"},r.a.createElement(T,null),r.a.createElement(y,null),r.a.createElement(f,null),r.a.createElement(S,null))}}]),a}(r.a.Component),w=a(15),C=(a(40),{BTCUSDT:{id:"BTCUSDT",base:"BTC",quote:"USDT"},ETHUSDT:{id:"ETHUSDT",base:"ETH",quote:"USDT"},BNBUSDT:{id:"BNBUSDT",base:"BNB",quote:"USDT"},ADAUSDT:{id:"ADAUSDT",base:"ADA",quote:"USDT"},BUSDUSDT:{id:"BUSDUSDT",base:"BUSD",quote:"USDT"},XRPUSDT:{id:"XRPUSDT",base:"XRP",quote:"USDT"},BCHUSDT:{id:"BCHUSDT",base:"BCH",quote:"USDT"},ETCUSDT:{id:"ETCUSDT",base:"ETC",quote:"USDT"},EOSUSDT:{id:"EOSUSDT",base:"EOS",quote:"USDT"},LTCUSDT:{id:"LTCUSDT",base:"XRP",quote:"USDT"},DASHUSDT:{id:"DASHUSDT",base:"DASH",quote:"USDT"},XMRUSDT:{id:"XMRUSDT",base:"XMR",quote:"USDT"}}),U=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={stockShowing:""},n.handleClickStock=n.handleClickStock.bind(Object(w.a)(n)),n}return Object(l.a)(a,[{key:"handleClickStock",value:function(e){this.setState({stockShowing:e.target.getAttribute("stockId")}),console.log(this.state.stockShowing),this.props.setStock(C[e.target.getAttribute("stockId")])}},{key:"render",value:function(){var e=this,t=Object.values(C);return r.a.createElement("div",{className:"StockList"},r.a.createElement("ul",null,t.map((function(t,a){return r.a.createElement("li",{key:a,onClick:e.handleClickStock,stockId:t.id,className:e.state.stockShowing===t.id?"selected":"unselected"},t.id)}))))}}]),a}(r.a.Component),j=Object(d.b)(null,{setStock:function(e){return{type:"SET_STOCK",payload:{stock:e}}}})(U),B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,null,r.a.createElement(m.a,null,r.a.createElement(p.a,{xs:"12",md:"12",lg:"3"},r.a.createElement(j,null)),r.a.createElement(p.a,{xs:"12",md:"12",lg:"9"},this.props.stockShowing?r.a.createElement(D,null):r.a.createElement("h4",{style:{width:"100%"}},"Select a stock...")))))}}]),a}(r.a.Component),N=Object(d.b)((function(e){return{stockShowing:b(e)}}))(B);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(41);var M=a(11),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STOCK":return t.payload.stock;default:return e}},z=a(13),L=[],R={volume:"",variation:"",high:"",low:"",last:""},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STOCK_INFO":return t.payload.info;default:return e}},P=[],I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TRADE":var a=t.payload.trade;return[a].concat(Object(z.a)(e.slice(0,20)));default:return e}},_=a(20),W={lastUpdateId:0,bids:[],asks:[]},H=Object(M.b)({candles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CANDLE":var a=t.payload.candle;return e.length>0&&e[e.length-1].time===a.time?[].concat(Object(z.a)(e.slice(0,-1)),[a]):[].concat(Object(z.a)(e),[a]);case"SET_CANDLES":var n=t.payload.candles;return n;default:return e}},stockShowing:A,stockInfo:x,trades:I,orderbook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ORDERBOOK":var a=e,n=a.asks.reduce((function(e,t){return e[t.price]=t.size,e}),{}),r=a.bids.reduce((function(e,t){return e[t.price]=t.size,e}),{}),o=t.payload.orderbook;if(o.u<=a.lastUpdateId)return a;for(var i=0;i<o.asks.length;i++){var c=o.asks[i];c[0]in n&&(0===c[1]?delete n[c[0]]:n[c[0]]=c[1])}for(var l=0;l<o.bids.length;l++){var s=o.bids[l];s[0]in r&&(0===s[1]?delete r[s[0]]:r[s[0]]=s[1])}return a.asks=Object.entries(n).map((function(e){var t=Object(_.a)(e,2);return{price:t[0],size:t[1]}})),a.bids=Object.entries(r).map((function(e){var t=Object(_.a)(e,2);return{price:t[0],size:t[1]}})),a;case"SET_ORDERBOOK":var u=t.payload.orderbook;return u;default:return e}}}),q=Object(M.c)(H),J=document.getElementById("root");i.a.render(r.a.createElement(d.a,{store:q},r.a.createElement(N,null)),J),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.614a57e6.chunk.js.map